[tox]
envlist =
    black,
    flake8,
    isort,
    {py37,py38,py39,py310}-django{32},
    {py38,py39,py310}-django{40,41,42,-latest},
    {py311}-django{41,42,-latest},
isolated_build = true
minversion = 1.9

[testenv]
description = run unit tests
deps =
    pytest>=7
    pytest-cov
    pytest-django
    pytest-sugar
    django32: Django>=3.2,<4.0
    django40: Django>=4.0,<4.1
    django41: Django>=4.1,<4.2
    django42: Django>=4.2,<4.3
    django-latest: https://github.com/django/django/archive/main.tar.gz
commands =
    pytest {posargs:tests}
; commands =
;     coverage run --source django_vite -m django test --settings=tests.settings {posargs}
;     coverage xml -o coverage-reports/coverage.xml
;     coverage html -d coverage-reports/html
;     coverage report
ignore_outcome =
    django-latest: True

[testenv:black]
basepython = python3
commands =
    black --check --diff .
deps =
    black
skip_install = true

[testenv:flake8]
commands =
    flake8
deps =
    flake8
    flake8-bugbear
    flake8-comprehensions
skip_install = true

[testenv:isort]
commands =
    isort --check-only --diff .
deps =
    isort
skip_install = true
